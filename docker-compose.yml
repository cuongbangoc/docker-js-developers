version: '2'

services:
    backend:
        container_name: backend
        build: ./backend/
        environment:
            PROJECT_NAME: backend
            NODE_ENV: dev
        volumes:
            - ./backend:/usr/src/app
        ports:
            - '8080:8080'
            - '5858:5858'
        # command: "pm2 start -x --no-daemon server.js --watch"  #--daemon"
        command: "nodemon -L --debug=5858 server.js"  #--daemon"
        networks:
            - front-net
            # - back-net

    # frontend:
    #     container_name: frontend
    #     environment:
    #         PROJECT_NAME: frontend
    #         NODE_ENV: "dev_local"
    #     build: ./frontend/
    #     # volumes:
    #     #     - /home/ubuntu/working/source_code/evgroups/sokhop-frontend-cms/config/dev.json:/build/config/default.json
    #     ports:
    #         - '3008:80'
    #     # environment:
    #     #     PROJECT_NAME: cms
    #     #     NODE_ENV: "dev"
    #     command: "/usr/bin/supervisord"
    #     networks:
    #         - front-net

    # webserver_nginx:
    #     container_name: webserver_nginx
    #     build: ./sokhop-deployment/nginx/
    #     ports:
    #         - '80:80'
    #     volumes:
    #         - ./sokhop-deployment/nginx/sites-enabled/api.sokhop.local:/etc/nginx/sites-enabled/api.sokhop.local
    #     networks:
    #         - front-net

networks:
  front-net:
#   back-net:
